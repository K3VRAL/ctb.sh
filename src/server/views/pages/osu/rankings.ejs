<!-- TODO format json -->
<!DOCTYPE html>
<html lang='en'>
    <head>
        <%- include('../../../partials/head'); %>
        <link rel="stylesheet" type="text/css" href="/css/pages/osu/index.css">
        <link rel="stylesheet" type="text/css" href="/css/pages/osu/rankings.css">
    </head>
    <body>
        <%- include('../../../partials/navigation'); %>
        <h1 id="title"><%= currpage %></h1>
        <form action='#' method='POST'>
            <input id='fmethod' type='hidden' name='method' value='sort'>
            <label for='forder' id='fpstyle'>Order by</label>
            <select if='forder' name='order'>
                <% for (let key in keys) { %>
                    <% if (keys[key].Field != 'link') { %>
                        <option value='<%= keys[key].Field %>'><%= keys[key].Field %></option>
                    <% } %>
                <% } %>
            </select>
            <input type='submit' value='Submit Data'>
        </form>
        <form action='#' method='POST' class='name'>
            <input id='fmethod' type='hidden' name='method' value='search'>
            <label for='fsearch' id='fpstyle'>Search User</label>
            <input if='fsearch' name='search' type='text'>
            <input type='submit' value='Search'>
        </form>
        <table border='2'>
            <thead>
                <% for (let key in keys) { %>
                    <% if (keys[key].Field != 'link') { %>
                        <th><%= keys[key].Field %></th>
                    <% } %>
                <% } %>
            </thead>
            <tbody>
                <% for (let data in datas) { %>
                    <tr>
                    <% for (let k = 0; k < keys.length; k++) { %>
                        <% if (keys[k].Field == 'user_username') { %>
                            <td><a href='https://osu.ppy.sh/users/<%= datas[data][keys[k-1].Field] %>/fruits'><%= datas[data][keys[k].Field] %></a></td>
                        <% } else { %>
                            <td><%= datas[data][keys[k].Field] %></td>
                        <% } %>
                    <% } %>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </body>
</html>